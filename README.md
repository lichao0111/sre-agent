

# 智能IT工单系统（Intelligent Ticket Agent）

用 `LangChain` + `OpenAI` + `Splunk` 构建的 DevOps 场景下的智能工单系统。系统目标为：

- 自动接收来自客户或监控的告警与报错
- 抽取关键信息并执行初步诊断
- 生成临时回复并将任务分类、分配给责任人
- 支持可审计的自动化 remediation（可选）
- 通过历史工单持续自学习以提升判定准确率

## 第一个 MVP

下面是第一个最小可行产品（MVP）的任务分解与粗略时间估算：

1. 事件接收层 — Webhook / API 集成（1 周）
    - 开发用于接收外部事件（监控、监控报警、客户报障）的 Webhook 或 API。
    - 与现有工单系统（或消息队列）对接，保证事件可靠入队。

2. NLP 抽取模块 — 大模型 + 规则/正则（2 周）
    - 使用大模型（如 OpenAI）结合正则与规则，抽取关键字段：`request_id`、`service_name`、错误摘要等。
    - 输出结构化事件数据供下游使用。

3. 日志检索适配器 — 接入 Elasticsearch / Loki（1 周）
    - 支持按 `request_id` 或指定时间窗口检索相关日志片段。
    - 返回上下文日志供 RCA 与大模型参考。

4. 规则化 RCA 引擎 — 常见错误映射（2 周）
    - 将常见错误模式（例如 DB timeout、OOM、连接池耗尽）映射到诊断建议与优先级。
    - 支持可扩展的规则集与策略配置。

5. ChatOps 集成 — Slack / 飞书 Bot（1 周）
    - 在 Chat 平台推送事件通知，支持与工程师的交互（确认、追加信息、指派）。

## 可选与后续功能

- 自动化 remediation：实现可审计的 remediation 脚本与审批流程（权限与安全控制）
- 历史工单自学习：将已关闭工单用于模型微调或规则优化，提升抽取与分类准确率
- 权限与审计：记录所有自动动作与人工干预以便追溯

## 下一步建议

- 确认首要接入的监控/告警来源（例如 Splunk、Prometheus、Grafana）
- 设计最小的事件 schema（必须字段与可选字段）
- 优先实现事件接收层与 NLP 抽取模块，快速产出可观测效果

